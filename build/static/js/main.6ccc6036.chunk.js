(this.webpackJsonpjson_server_example=this.webpackJsonpjson_server_example||[]).push([[0],{22:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(17),o=n.n(c),i=(n(22),n(8)),u=n(3),s=n.n(u),l=n(4),p=n(5),d=n(0),j=function(t){return Object(d.jsx)("div",{className:t.message&&"errormsg_error",children:t.message})},f=function(){return Object(d.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(d.jsx)("br",{}),Object(d.jsx)("em",{children:"Note app, Department of Computer Science, University of Helsinki 2021"})]})},b=function(t){var e=t.note,n=t.toggleImportant,r=t.deleteNote,a={margin:"5px"},c=e.important?"mark no important":"mark important";return Object(d.jsxs)("li",{style:{listStyle:"none"},children:[e.content,Object(d.jsx)("button",{onClick:n,style:a,children:c}),Object(d.jsx)("button",{onClick:r,style:a,children:"Delete"})]})},O=n(6),h=n.n(O),m="/api/notes",v=null,x={getAll:function(){return h.a.get(m).then((function(t){return t.data}))},create:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:v}},t.next=3,h.a.post(m,e,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(l.a)(s.a.mark((function t(e,n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:v}},t.next=3,h.a.put("".concat(m,"/").concat(e),n,r);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),delete:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:v}},t.next=3,h.a.delete("".concat(m,"/").concat(e),n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),setToken:function(t){v="bearer ".concat(t)}},g={login:function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.post("/api/login",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(){var t=Object(r.useState)([]),e=Object(p.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(""),o=Object(p.a)(c,2),u=o[0],O=o[1],h=Object(r.useState)(!0),m=Object(p.a)(h,2),v=m[0],w=m[1],S=Object(r.useState)(""),k=Object(p.a)(S,2),y=k[0],A=k[1],N=Object(r.useState)(""),C=Object(p.a)(N,2),I=C[0],D=C[1],T=Object(r.useState)(""),_=Object(p.a)(T,2),z=_[0],J=_[1],U=Object(r.useState)(null),E=Object(p.a)(U,2),L=E[0],M=E[1],B=function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,g.login({username:I,password:z});case 4:n=t.sent,window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(n)),x.setToken(n.token),M(n),D(""),J(""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),A("wrong credentials"),setTimeout((function(){A("")}),5e3);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),H=function(t){t.preventDefault();var e={content:u,date:(new Date).toISOString(),important:Math.random()<.5};x.create(e).then((function(t){e.id=t.id,a(n.concat(e)),O("")}))},q=function(t){t.preventDefault(),O(t.target.value)},F=v?n:n.filter((function(t){return!0===t.important}));return Object(r.useEffect)((function(){x.getAll().then((function(t){a(t)}))}),[]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedNoteAppUser");if(t){var e=JSON.parse(t);M(e),x.setToken(e.token)}}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Notes"}),Object(d.jsx)(j,{message:y}),null===L?Object(d.jsxs)("form",{onSubmit:B,children:[Object(d.jsxs)("div",{children:["username",Object(d.jsx)("input",{type:"text",value:I,name:"username",onChange:function(t){return D(t.target.value)}})]}),Object(d.jsxs)("div",{children:["passowrd",Object(d.jsx)("input",{type:"password",value:z,name:"password",onChange:function(t){return J(t.target.value)}})]}),Object(d.jsx)("button",{type:"submit",children:"Login"})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[L.username," logged in  ",Object(d.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteAppUser"),M(null)},children:"Log out"})," "]}),Object(d.jsxs)("form",{onSubmit:H,children:[Object(d.jsx)("input",{value:u,onChange:q}),Object(d.jsx)("button",{type:"submit",disabled:!u,children:"Add"})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("button",{onClick:function(){w(!v)},children:["Show ",v?"All":"Important"]})}),Object(d.jsx)("ul",{style:{padding:"5px"},children:F.map((function(t){return Object(d.jsx)(b,{note:t,toggleImportant:function(){return function(t){var e=n.find((function(e){return e.id===t})),r=Object(i.a)(Object(i.a)({},e),{},{important:!e.important});x.update(t,r).then((function(e){a(n.map((function(n){return n.id!==t?n:e})))})).catch((function(t){A(t.response.data.error),setTimeout((function(){A("")}),5e3)}))}(t.id)},deleteNote:function(){return e=t.id,void x.delete(e).then((function(t){a(n.filter((function(t){return t.id!==e})))})).catch((function(t){A(t.response.data.error),setTimeout((function(){A("")}),5e3)}));var e}},t.id)}))})]}),Object(d.jsx)(f,{})]})};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.6ccc6036.chunk.js.map